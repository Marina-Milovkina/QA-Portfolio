# Баг-репорт №1

| Поле                      | Значение                                                                                                                                                                                                                                                                                                                                                                                                         |
|---------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| 
| **Заголовок**             | Ошибка 500 при добавлении игры без дополнения через POST-запрос                                                                                                                                                                                                                                                                                                                                                  |
| **Описание**              | При отправке корректного POST-запроса на добавление новой игры через эндпоинт /games сервер возвращает ошибку 500 Internal Server Error. Все обязательные поля переданы, токен авторизации указан в заголовке. Запрос не содержит объект "Дополнения" (DLC) — ошибка возникает при попытке добавить игру без DLC.                                                                                                |
| **Предусловие**           | URL: http://85.192.34.140/api/user/games  Метод: POST  Пользователь зарегистрирован  Получен токен  URL: http://85.192.34.140/api/login  Тестовые данные: { "username": "test_user10", "password": "test12345" } Заголовок: Authorization: Bearer {token}                                                                                                                                                        |
| **Шаги воспроизведения**  | Отправить POST-запрос на http://85.192.34.140/api/user/games с телом:  ```json { "company": "ООО_Тест", "description": "Тестовое описание", "gameId": 0, "genre": "RPG", "isFree": true, "price": 0, "publish_date": "2025-03-14T08:11:44.746Z", "rating": 5, "requiredAge": true, "requirements": { "hardDrive": 40, "osName": "OS", "ramGb": 8, "videoCard": "RTX" }, "tags": ["тэг_1"], "title": "ТЕСТ" } ``` |
| **Ожидаемый результат**   | 201 Created / Игра успешно добавлена                                                                                                                                                                                                                                                                                                                                                                             |
| **Фактический результат** | 500 Internal server error                                                                                                                                                                                                                                                                                                                                                                                        |

# Баг-репорт №2

| Поле                      | Значение                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|---------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Заголовок**             | Отсутствует зависимость поля "isFree" от поля "price" в объекте дополнений при обновлении через PUT /games                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **Описание**              | Метод PUT /games не валидирует бизнес-логику между полями "isFree" и "price" в объектах дополнений (DLC). В результате сервер принимает и успешно обрабатывает следующие некорректные комбинации: <br><br> "isFree": true при "price": 199 <br><br> "isFree": false при "price": 0 <br><br> указано "price", но отсутствует поле "isFree"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **Предусловие**           | URL для добавления игры: http://85.192.34.140/api/user/games/{gameId} <br> URL для авторизации: http://85.192.34.140/api/login <br> Пользователь зарегистрирован и авторизован <br> Тестовые данные: { "username": "test_user10", "password": "test12345" } <br> Токен передан в заголовке: Authorization: Bearer {token} <br> Игра была создана заранее через POST-запрос на http://85.192.34.140/api/user/games, получен gameId из ответа                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **Шаги воспроизведения**  | Отправить PUT-запрос на http://85.192.34.140/api/user/games/{gameId} с телом:<br><br>```json [ { "description": "dlc_description", "dlcName": "name_dlc1", "isFree ": true, "price": 199, "rating": 4, "similarDlc": { "dlcNameFromAnotherGame": "name2", "isFree": true } } ]```<br><br>Отправить PUT-запрос с телом:<br><br>```json [ { "description": "dlc_description", "dlcName": "name_dlc2", "isFree ": false, "price": 0, "rating": 4, "similarDlc": { "dlcNameFromAnotherGame": "name2", "isFree": true } } ]```<br><br>Отправить PUT-запрос с телом:<br><br>```json [ { "description": "dlc_description", "dlcName": "name_dlc3", "price": 180, "rating": 4, "similarDlc": { "dlcNameFromAnotherGame": "name2", "isFree": true } } ]```<br><br>Проверить, добавились ли дополнения. Отправить GET-запрос на http://85.192.34.140/api/user/games/{gameId}, передав в URL параметр "gameId" |
| **Ожидаемый результат**   | Шаги 1-3: 400 / Неудачная попытка обновить DLC у игры. Игра не существует или неверно описана модель DLC для обновления. <br><br> Шаг 4: 200 / Игра успешно отобразилась, но дополнения из шагов 1-3 не добавлены в список DLC.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **Фактический результат** | Шаги 1-3: 200 OK / Список DLC у игры успешно изменен. <br><br> Шаг 4: 200 / Игра успешно отобразилась. В ответе отобразились все добавленные дополнения, включая те, которые не соответствуют бизнес-логике.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |

# Баг-репорт №3

| Поле                      | Значение                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|---------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Заголовок**             | Успешная регистрация пользователя с некорректным типом данных для пароля                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **Описание**              | Система позволяет зарегистрировать пользователя, указав пароль в формате integer, несмотря на то, что согласно документации поле "pass" должно принимать только тип string. Ошибка возникает из-за отсутствия валидации типа данных на этапе регистрации.                                                                                                                                                                                                                                                                                                                                                 |
| **Предусловие**           | URL для регистрации: http://85.192.34.140/api/signup <br> URL для авторизации: http://85.192.34.140/api/login <br> URL для получения информации о пользователе: http://85.192.34.140/api/user                                                                                                                                                                                                                                                                                                                                                                                                             |
| **Шаги воспроизведения**  | Отправить POST-запрос на http://85.192.34.140/api/signup с телом:<br><br>```json { "login": "test_user1", "pass": 123 }```<br><br>Получить токен. Отправить POST-запрос на http://85.192.34.140/api/login с телом:<br><br>```json { "username": "test_user1", "password": 123 }```<br><br>Передать полученный токен в заголовке: Authorization: Bearer {token}<br><br>Проверить, зарегистрирован ли пользователь. Отправить GET-запрос на http://85.192.34.140/api/user с телом:<br><br>```json { "id": 527406, "login": "test_user10", "pass": "test12345" }```<br><br>где id получен из ответа на шаг 1 |
| **Ожидаемый результат**   | Регистрация пользователя с паролем типа integer не прошла. Сервер возвращает: 400 Bad Request / Ошибка регистрации, неверные поля. <br><br>При попытке авторизации или получения информации о пользователе — 401 Unauthorized.                                                                                                                                                                                                                                                                                                                                                                            |
| **Фактический результат** | Шаг 1: 201 Created / пользователь зарегистрирован <br><br> Шаг 2: 200 OK / Jwt токен пользователя для дальнейших действий <br><br> Шаг 4: 200 OK / информация о пользователе успешно возвращена                                                                                                                                                                                                                                                                                                                                                                                                           |
